groups:
  - name: modamoda.slo
    rules:
    - alert: ModamodaHighP95Latency
      expr: |
        histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{job=~"modamoda-api.*"}[5m])) by (le))
        > 0.5
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "High p95 latency"
        description: "p95 latency above 0.5s for 5m"
    - alert: ModamodaHighErrorRate
      expr: |
        (sum(rate(http_requests_total{job=~"modamoda-api.*",status=~"5.."}[5m])) by ()
         /
         sum(rate(http_requests_total{job=~"modamoda-api.*"}[5m])) by ()) > 0.01
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "High 5xx error rate"
        description: "5xx error rate above 1% for 5m"
