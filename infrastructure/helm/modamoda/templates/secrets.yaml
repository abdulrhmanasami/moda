# @Study:ST-012 @Study:ST-019
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "modamoda.fullname" . }}-secrets
  labels:
    app.kubernetes.io/name: {{ include "modamoda.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: secrets
    app.kubernetes.io/managed-by: {{ .Release.Service }}
type: Opaque
data:
  # Database connection
  database-url: {{ required "Database URL is required" .Values.app.secrets.databaseUrl | b64enc }}

  # Redis connection
  redis-url: {{ required "Redis URL is required" .Values.app.secrets.redisUrl | b64enc }}

  # Security keys
  secret-key: {{ required "Secret key is required" .Values.app.secrets.secretKey | b64enc }}
  jwt-secret-key: {{ required "JWT secret key is required" .Values.app.secrets.jwtSecretKey | b64enc }}

  # AI services
  openai-api-key: {{ required "OpenAI API key is required" .Values.app.secrets.openaiApiKey | b64enc }}

  # Optional services
  {{- if .Values.app.secrets.huggingfaceApiKey }}
  huggingface-api-key: {{ .Values.app.secrets.huggingfaceApiKey | b64enc }}
  {{- end }}

  {{- if .Values.app.secrets.replicateApiToken }}
  replicate-api-token: {{ .Values.app.secrets.replicateApiToken | b64enc }}
  {{- end }}
